#include <stdio.h>
#define MAX 10
void display(int a[MAX]);
void linear_prob(int a[MAX]){
    int flag, key, i, addrs, count;
    char ans;
    do{
        flag = 0;
        count = 0;
        printf("\nEnter 4 digit Key: ");
        scanf("%4d", &key);
        addrs = key % 10;
        if (a[addrs] == -1)
            a[addrs] = key;
        else{
            printf("\nCollision Detected\n");
            i = 0;
            while (i < MAX){
                if (a[i] != -1)
                    count++;
                i++;
            }
            if (count == MAX){
                printf("\nHash table is full\n");
                display(a);
                return;
            }
            printf("\nCollision avoided using Linear Probing\n");
            for (i = addrs + 1; i < MAX; i++){
                if (a[i] == -1){
                    a[i] = key;
                    flag = 1;
                    break;
                }
            }
            i = 0;
            while (i < addrs && flag == 0){
                if (a[i] == -1){
                    a[i] = key;
                    flag = 1;
                    break;
                }
                i++;
            }
        }
        printf("\nDo you wish to continue? (y/n): ");
        scanf(" %c", &ans);
    } 
    while (ans == 'y' || ans == 'Y');
}
void display(int a[MAX]){
    int i;
    printf("\nHASH TABLE");
    printf("\nIndex\tKey");
    for (i = 0; i < MAX; i++)
        printf("\n%d\t%d", i, a[i]);
}
int main(){
    int a[MAX], i, choice;
    for (i = 0; i < MAX; i++)
        a[i] = -1;
    while (1){
        printf("\n1.Insert");
        printf("\n2.Display");
        printf("\n3.Exit");
        printf("\nEnter choice: ");
        scanf("%d", &choice);
        switch (choice){
        case 1:
            linear_prob(a);
            break;
        case 2:
            display(a);
            break;
        case 3:
            return 0;
        default:
            printf("Invalid Choice\n");
        }
    }
}
